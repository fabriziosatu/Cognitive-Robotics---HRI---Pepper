<launch>
	<arg name="node_start_delay" default="60.0"/>
	<arg name="nao_ip" default="$(optenv NAO_IP 10.0.1.230)" />
	<arg name="nao_port" default="$(optenv NAO_PORT 9559)" />
	<arg name="pepper_on" default="True"/>
	<arg name="pepper_camera_on" default="True"/>
	<arg name="mic_index" default="2" />

	<node pkg="chatbot" name="rasa_action" type="rasa_action.sh" output="screen"/>
	<node pkg="chatbot" name="rasa_server" type="rasa_server.sh" output="screen"/> 
	<node pkg="chatbot" name="dialogue_server" type="dialogue_server.py" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	<node pkg="chatbot" name="asr" type="asr_node.py" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	<node pkg="chatbot" name="dialogue_interface" type="dialogue_interface.py" output="screen" launch-prefix="gnome-terminal -- bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
  
	<!-- Launch People and Face Detector -->
	<node pkg="detector" type="people_detector_node.py" name="people_detector_node" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	<node pkg="detector" type="face_detector_node.py" name="face_detector_node" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	<node pkg="detector" type="emotion_recognition_node.py" name="emotion_recognition_node" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	<node pkg="detector" type="visualization_node.py" name="visualization_node" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	<!-- Launch Pepper Nodes -->
	<group if='$(eval pepper_on==True)'>
		<node pkg="pepper_nodes" type="wakeup_rest_node.py" name="wakeup_node" required="true" args="--ip=$(arg nao_ip) --port=$(arg nao_port)" output="screen" />
		<node pkg="pepper_nodes" type="animation_node.py" name="animation_node" required="true" args="--ip=$(arg nao_ip) --port=$(arg nao_port)" output="screen" />
		<node pkg="pepper_nodes" type="text2speech_node.py" name="text2speech" required="true" args="--ip=$(arg nao_ip) --port=$(arg nao_port)" output="screen" />
	</group>
	
	<node pkg="pepper_nodes" type="image_publisher_node.py" name="image_publisher_node" output="screen" args = "--pepper_camera_on=$(arg pepper_camera_on) --ip=$(arg nao_ip) --port=$(arg nao_port)" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' "/>
	
</launch>
